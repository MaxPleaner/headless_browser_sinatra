<!doctype html>
<html lang='en'>
<head>
<title> headless_browser_sinatra </title>
<link rel="stylesheet" href="./style.css">
<script src="jquery.js"></script>
</head>
<body>

<div class="navbar">
  <div class="navbar-item">
    <a href="/">headless_browser_sinatra</a>
  </div>
  <div class="navbar-item">
    <a href="http://github.com/maxpleaner/headless_browser_sinatra">
      Github
    </a>
  </div>
</div>

<%= yield %>

<script>

  `When the image is clicked, get the x,y coords of the mouse
  and send them to the server.
  The click is mirrored on the headless firefox browser
  and the screenshot updates to show the result.
  If an input is clicked, it will be tracked as 'window.lastSelectedElement'
  and will be considered the target location for text entry`
  
  $(function() {
    $('img').click(function(e) {
      var offset = $(this).offset();
      var x = e.pageX - offset.left;
      var y = e.pageY - offset.top;
      window.location = `http://localhost:4567?click_coords=${x},${y}`
    });
  })
  
</script>
</body>
</html>